<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="Content-Language" content="fr">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jour J - Notre Amour</title>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Lora:wght@400;500&family=Dancing+Script:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      width: 100%;
      height: 100%;
    }

    body {
      min-height: 100vh;
      font-family: 'Lora', serif;
      background: #0a0a0a;
      overflow-x: hidden;
      color: #fff;
    }

    /* Cinematic Background */
    .cinematic-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: 
        radial-gradient(ellipse at 20% 80%, rgba(255, 20, 147, 0.15) 0%, transparent 50%),
        radial-gradient(ellipse at 80% 20%, rgba(255, 105, 180, 0.1) 0%, transparent 50%),
        radial-gradient(ellipse at 50% 50%, rgba(139, 0, 78, 0.2) 0%, transparent 70%),
        linear-gradient(180deg, #0a0a0a 0%, #1a0a10 50%, #0a0a0a 100%);
      z-index: 0;
    }

    /* Animated Stars */
    .stars {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
    }

    .star {
      position: absolute;
      width: 3px;
      height: 3px;
      background: #fff;
      border-radius: 50%;
      animation: twinkle var(--duration) ease-in-out infinite;
      opacity: 0;
    }

    @keyframes twinkle {
      0%, 100% { opacity: 0; transform: scale(0.5); }
      50% { opacity: var(--opacity); transform: scale(1); }
    }

    /* Floating Rose Petals */
    .petals-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      overflow: hidden;
      z-index: 2;
    }

    .petal {
      position: absolute;
      top: -50px;
      width: 20px;
      height: 25px;
      background: linear-gradient(135deg, #ff69b4, #ff1493);
      border-radius: 50% 0 50% 50%;
      opacity: 0.6;
      animation: petalFall linear infinite;
      filter: blur(1px);
    }

    @keyframes petalFall {
      0% {
        transform: translateY(0) rotate(0deg) translateX(0);
        opacity: 0;
      }
      10% { opacity: 0.6; }
      90% { opacity: 0.6; }
      100% {
        transform: translateY(100vh) rotate(720deg) translateX(100px);
        opacity: 0;
      }
    }

    /* Hearts Rain */
    .hearts-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      overflow: hidden;
      z-index: 3;
    }

    .heart {
      position: absolute;
      bottom: -50px;
      opacity: 0;
      animation: floatUp linear infinite;
      text-shadow: 0 0 20px currentColor;
    }

    @keyframes floatUp {
      0% {
        opacity: 0;
        transform: translateY(0) rotate(0deg) scale(0.5);
      }
      10% {
        opacity: 0.8;
        transform: scale(1);
      }
      90% {
        opacity: 0.8;
      }
      100% {
        opacity: 0;
        transform: translateY(-100vh) rotate(360deg) scale(0.5);
      }
    }

    /* Main Container */
    .main-container {
      position: relative;
      z-index: 10;
      min-height: 100vh;
    }

    /* Content Container */
    .content {
      position: relative;
      z-index: 15;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 60px 20px;
    }

    /* Back Link */
    .back-link {
      position: fixed;
      top: 30px;
      left: 30px;
      color: rgba(255, 105, 180, 0.7);
      text-decoration: none;
      font-size: 1rem;
      transition: all 0.3s ease;
      z-index: 100;
      opacity: 0;
      visibility: hidden;
    }

    .back-link.show {
      opacity: 1;
      visibility: visible;
    }

    .back-link:hover {
      color: #ff69b4;
      transform: translateX(-5px);
      text-shadow: 0 0 20px rgba(255, 105, 180, 0.5);
    }

    /* ========== POEM SECTION ========== */
    .poem-section {
      text-align: center;
      animation: fadeIn 1s ease-out;
    }

    .poem-label {
      font-size: 0.9rem;
      color: #ff69b4;
      text-transform: uppercase;
      letter-spacing: 5px;
      margin-bottom: 20px;
      animation: fadeInUp 1s ease-out;
    }

    .poem-title {
      font-family: 'Playfair Display', serif;
      font-size: 3.5rem;
      background: linear-gradient(135deg, #ff69b4, #ffb6c1);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: fadeInUp 1s ease-out 0.3s both;
      filter: drop-shadow(0 0 20px rgba(255, 105, 180, 0.3));
      margin-bottom: 40px;
    }

    .poem-container {
      max-width: 800px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 105, 180, 0.2);
      border-radius: 30px;
      padding: 60px 50px;
      backdrop-filter: blur(10px);
      box-shadow: 
        0 0 60px rgba(255, 20, 147, 0.1),
        inset 0 0 60px rgba(255, 105, 180, 0.05);
    }

    .poem-verse {
      font-family: 'Playfair Display', serif;
      font-size: 1.5rem;
      line-height: 2;
      color: rgba(255, 255, 255, 0.5);
      text-align: center;
      direction: ltr;
      padding: 20px;
      margin: 20px 0;
      opacity: 0;
      transform: translateY(30px);
      transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
      min-height: 60px;
    }

    .poem-verse.active {
      opacity: 1;
      transform: translateY(0);
      color: #ffb6c1;
      font-size: 1.8rem;
      text-shadow: 0 0 40px rgba(255, 105, 180, 0.5);
    }

    .final-message {
      font-family: 'Dancing Script', cursive;
      font-size: 3rem;
      background: linear-gradient(135deg, #ff69b4, #ffb6c1, #ff1493);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-align: center;
      margin-top: 50px;
      opacity: 0;
      transform: scale(0.8);
      transition: all 1s cubic-bezier(0.4, 0, 0.2, 1);
      filter: drop-shadow(0 0 30px rgba(255, 105, 180, 0.5));
    }

    .final-message.show {
      opacity: 1;
      transform: scale(1);
    }

    .read-btn, .continue-btn {
      display: block;
      margin: 40px auto 0;
      padding: 18px 50px;
      font-family: 'Playfair Display', serif;
      font-size: 1.1rem;
      letter-spacing: 2px;
      text-transform: uppercase;
      color: #fff;
      background: linear-gradient(135deg, #ff1493, #ff69b4);
      border: none;
      border-radius: 50px;
      cursor: pointer;
      transition: all 0.4s ease;
      box-shadow: 0 0 30px rgba(255, 20, 147, 0.3);
    }

    .read-btn:hover, .continue-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 0 50px rgba(255, 20, 147, 0.5);
    }

    /* ========== COUNTDOWN SECTION ========== */
    .countdown-section {
      text-align: center;
      animation: fadeIn 1s ease-out;
    }

    .countdown-title {
      font-family: 'Dancing Script', cursive;
      font-size: 3rem;
      color: #ff69b4;
      margin-bottom: 60px;
      text-shadow: 0 0 30px rgba(255, 105, 180, 0.5);
      animation: fadeInUp 1s ease-out;
    }

    .countdown-number {
      font-family: 'Playfair Display', serif;
      font-size: 15rem;
      font-weight: 700;
      background: linear-gradient(135deg, #ff1493, #ff69b4, #ffb6c1);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      filter: drop-shadow(0 0 60px rgba(255, 20, 147, 0.5));
      animation: countPulse 1s ease-in-out infinite;
    }

    @keyframes countPulse {
      0%, 100% { transform: scale(1); filter: drop-shadow(0 0 60px rgba(255, 20, 147, 0.5)); }
      50% { transform: scale(1.05); filter: drop-shadow(0 0 100px rgba(255, 20, 147, 0.8)); }
    }

    .countdown-label {
      font-size: 1.5rem;
      color: rgba(255, 182, 193, 0.7);
      letter-spacing: 10px;
      text-transform: uppercase;
      margin-top: 30px;
    }

    /* ========== CELEBRATION SECTION ========== */
    .celebration-section {
      text-align: center;
      animation: fadeIn 1s ease-out;
      max-width: 900px;
    }

    .celebration-title {
      font-family: 'Dancing Script', cursive;
      font-size: 5rem;
      background: linear-gradient(135deg, #ff69b4, #ff1493, #ffb6c1, #ff69b4);
      background-size: 300% 300%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: gradientText 3s ease infinite, scaleIn 1s cubic-bezier(0.4, 0, 0.2, 1);
      filter: drop-shadow(0 0 50px rgba(255, 105, 180, 0.5));
      margin-bottom: 30px;
    }

    @keyframes gradientText {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    @keyframes scaleIn {
      from { opacity: 0; transform: scale(0.5); }
      to { opacity: 1; transform: scale(1); }
    }

    .celebration-message {
      font-family: 'Lora', serif;
      font-size: 1.5rem;
      color: rgba(255, 182, 193, 0.9);
      margin-bottom: 40px;
      animation: fadeInUp 1.2s ease-out;
    }

    .emotional-text {
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 105, 180, 0.2);
      padding: 30px;
      border-radius: 15px;
      margin: 30px 0;
      backdrop-filter: blur(10px);
      animation: fadeInUp 1.4s ease-out;
    }

    .emotional-text p {
      font-family: 'Lora', serif;
      font-size: 1.2rem;
      color: rgba(255, 182, 193, 0.8);
      line-height: 2;
      margin: 15px 0;
      text-align: center;
    }

    .love-declaration {
      background: rgba(255, 20, 147, 0.05);
      padding: 40px;
      border-radius: 15px;
      margin: 40px 0;
      border-left: 5px solid #ffb6c1;
      animation: fadeInUp 2s ease-out;
    }

    .love-declaration p {
      font-family: 'Lora', serif;
      font-size: 1.3rem;
      color: rgba(255, 182, 193, 0.9);
      line-height: 2;
      margin: 20px 0;
      text-align: center;
    }

    .final-vow {
      font-size: 1.5rem !important;
      font-weight: bold;
      margin-top: 30px !important;
      color: #ff69b4 !important;
    }

    .forever-text {
      font-family: 'Dancing Script', cursive;
      font-size: 1.8rem;
      color: #ffb6c1;
      margin-top: 40px;
      text-align: center;
      animation: fadeInUp 2.5s ease-out;
    }

    .video-section {
      width: 100%;
      height: 100vh;
      margin: 0;
      padding: 0;
      text-align: center;
      animation: none;
      display: flex;
      align-items: center;
      justify-content: center;
      position: fixed;
      top: 0;
      left: 0;
      z-index: 100;
    }

    .video-container {
      position: absolute;
      width: 85%;
      height: 85%;
      border-radius: 0;
      overflow: hidden;
      box-shadow: none;
      background: #000;
      aspect-ratio: auto;
    }

    .video-container video {
      width: 100%;
      height: 100%;
      display: block;
      object-fit: cover;
    }

    .celebration-content {
      position: absolute;
      bottom: 60px;
      left: 50%;
      transform: translateX(-50%);
      width: 100%;
      max-width: 100%;
      padding: 0 20px;
      text-align: center;
      z-index: 101;
    }

    .celebration-joy-text {
      font-family: 'Dancing Script', cursive;
      font-size: 2.5rem;
      background: linear-gradient(135deg, #ff69b4, #ffb6c1);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      filter: drop-shadow(0 0 20px rgba(255, 105, 180, 0.8));
      text-shadow: 0 0 40px rgba(255, 20, 147, 0.6);
      animation: pulseText 2s ease-in-out infinite;
    }

    @keyframes pulseText {
      0%, 100% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.1); opacity: 0.8; }
    }

    .background-music {
      display: none;
    }

    /* Fireworks */
    .fireworks-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 12;
    }

    .firework {
      position: absolute;
      width: 4px;
      height: 4px;
      background: #ffb6c1;
      border-radius: 50%;
      pointer-events: none;
    }

    @keyframes fireWorkExplosion {
      to {
        transform: translate(var(--tx), var(--ty));
        opacity: 0;
      }
    }

    .confetti {
      position: fixed;
      width: 10px;
      height: 10px;
      opacity: 1;
      z-index: 20;
    }

    @keyframes fall {
      to {
        transform: translateY(100vh) rotate(360deg);
        opacity: 0;
      }
    }

    @keyframes countPulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.15); }
      100% { transform: scale(1); }
    }
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(50px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @media (max-width: 768px) {
      .poem-title, .celebration-title {
        font-size: 2.5rem;
      }

      .countdown-number {
        font-size: 8rem;
      }

      .poem-verse {
        font-size: 1.2rem;
      }

      .poem-container {
        padding: 30px 20px;
      }
    }
  </style>
</head>
<body>
  <div class="cinematic-bg"></div>
  <div class="stars" id="stars"></div>
  <div class="petals-container" id="petals"></div>
  <div class="hearts-container" id="hearts"></div>
  
  <audio class="background-music" id="backgroundMusic" loop>
    <source src="audio/background-music.mp3" type="audio/mpeg">
  </audio>

  <a href="index.html" class="back-link" id="backLink">‚Üê Retour √† l'accueil</a>

  <div class="main-container">
    <div class="content" id="content"></div>
  </div>

  <div class="fireworks-container" id="fireworks"></div>

  <script>
    // ========== CONFIGURATION ==========
    const verses = [
      { text: "Il y a eu un temps o√π les jours passaient sans laisser de trace.", audioUrl: "audio/verse1.mp3" },
      { text: "Je vivais, oui‚Ä¶ mais sans vraiment comprendre pourquoi.", audioUrl: "audio/verse2.mp3" },
      { text: "Puis tu es arriv√©e.", audioUrl: "audio/verse3.mp3" },
      { text: "Sans bruit. Sans promesse.", audioUrl: "audio/verse4.mp3" },
      { text: "Et pourtant, tout a commenc√© √† changer.", audioUrl: "audio/verse5.mp3" },
      { text: "Avec toi, le monde est devenu plus doux.", audioUrl: "audio/verse6.mp3" },
      { text: "Les couleurs plus vives.", audioUrl: "audio/verse7.mp3" },
      { text: "M√™me le silence avait un sens quand tu √©tais l√†.", audioUrl: "audio/verse8.mp3" },
      { text: "Tu n'as pas seulement aim√© mes r√©ussites,", audioUrl: "audio/verse9.mp3" },
      { text: "tu as c√©l√©br√© mes victoires comme si elles √©taient les tiennes.", audioUrl: "audio/verse10.mp3" },
      { text: "Et c'est l√† que j'ai compris : ce que je ressentais n'√©tait pas juste de l'amour‚Ä¶ c'√©tait un foyer.", audioUrl: "audio/verse11.mp3" },
      { text: "Aujourd'hui, apr√®s deux ans, je ne compte plus le temps en jours, mais en souvenirs avec toi.", audioUrl: "audio/verse12.mp3" },
      { text: "Et si demain me fait parfois peur, je sais une chose : tant que ta main est dans la mienne, je n'ai rien √† craindre.", audioUrl: "audio/verse13.mp3" },
      { text: "Ce site n'est pas un cadeau. C'est un fragment de mon c≈ìur.", audioUrl: "audio/verse14.mp3" },
      { text: "Et cette histoire‚Ä¶ ce n'est que le d√©but de la n√¥tre.", audioUrl: "audio/verse15.mp3" }
    ];

    const finalMessage = "KANBGHIK KTER MN KOULSHY ‚ù§Ô∏è";
    const backgroundMusicUrl = "audio/background-music.mp3";
    const celebrationVideoUrl = "videos/celebration.mp4";
    
    let currentVerseIndex = 0;
    let audioElement = null;
    let backgroundMusic = null;

    // Initialize stars
    function createStars() {
      const starsContainer = document.getElementById('stars');
      for (let i = 0; i < 100; i++) {
        const star = document.createElement('div');
        star.className = 'star';
        star.style.left = Math.random() * 100 + '%';
        star.style.top = Math.random() * 100 + '%';
        star.style.setProperty('--duration', (Math.random() * 3 + 1) + 's');
        star.style.setProperty('--opacity', Math.random() * 0.7 + 0.3);
        starsContainer.appendChild(star);
      }
    }

    // Initialize petals
    function createPetals() {
      const petalsContainer = document.getElementById('petals');
      for (let i = 0; i < 20; i++) {
        const petal = document.createElement('div');
        petal.className = 'petal';
        petal.style.left = Math.random() * 100 + '%';
        petal.style.animationDuration = (Math.random() * 10 + 10) + 's';
        petal.style.animationDelay = Math.random() * 5 + 's';
        petalsContainer.appendChild(petal);
      }
    }

    // Initialize hearts
    function createHearts() {
      const heartsContainer = document.getElementById('hearts');
      for (let i = 0; i < 15; i++) {
        const heart = document.createElement('div');
        heart.className = 'heart';
        heart.textContent = '‚ù§Ô∏è';
        heart.style.left = Math.random() * 100 + '%';
        heart.style.animationDuration = (Math.random() * 5 + 5) + 's';
        heart.style.animationDelay = Math.random() * 2 + 's';
        heart.style.fontSize = (Math.random() * 30 + 20) + 'px';
        heartsContainer.appendChild(heart);
      }
    }

    // Show poem section
    function showPoemSection() {
      const contentEl = document.getElementById('content');
      contentEl.innerHTML = `
        <div class="poem-section">
          <p class="poem-label">Jour J</p>
          <h1 class="poem-title">Mon C≈ìur Pour Toi</h1>
          
          <div class="poem-container">
            <div id="versesContainer"></div>
            <p class="final-message" id="finalMessage"></p>
          </div>
          
          <button class="read-btn" onclick="startPlayingVerses()">Lire Mon Message</button>
        </div>
      `;

      // Render verses
      const versesContainer = document.getElementById('versesContainer');
      verses.forEach((verse, index) => {
        const verseDiv = document.createElement('div');
        verseDiv.className = 'poem-verse';
        verseDiv.textContent = verse.text;
        versesContainer.appendChild(verseDiv);
      });

      // Initialize audio element
      audioElement = new Audio();
      audioElement.crossOrigin = "anonymous";
    }

    // Start playing verses
    function startPlayingVerses() {
      currentVerseIndex = 0;
      console.log("[v0] Starting to play verses");
      
      // Start background music when verses begin
      const backgroundMusic = document.getElementById('backgroundMusic');
      if (backgroundMusic) {
        backgroundMusic.volume = 0.04;
        backgroundMusic.currentTime = 0;
        backgroundMusic.play().catch((err) => console.log("[v0] Background music play failed:", err));
      }
      
      playNextVerse();
    }

    // Play next verse
    function playNextVerse() {
      if (currentVerseIndex < verses.length) {
        const verse = verses[currentVerseIndex];
        const verseElements = document.querySelectorAll('.poem-verse');
        
        // Highlight current verse
        verseElements.forEach((el, idx) => {
          el.classList.remove('active');
          if (idx === currentVerseIndex) {
            el.classList.add('active');
            el.scrollIntoView({ behavior: 'smooth', block: 'center' });
          }
        });

        console.log("[v0] Playing verse", currentVerseIndex + 1, ":", verse.text);

        // Play audio
        if (verse.audioUrl) {
          audioElement.src = verse.audioUrl;
          const backgroundMusic = document.getElementById('backgroundMusic');
          
          // Lower background music volume while verse plays
          if (backgroundMusic) {
            backgroundMusic.volume = 0.01;
          }
          
          audioElement.onended = () => {
            console.log("[v0] Verse audio ended, moving to next");
            // Restore background music volume after verse
            if (backgroundMusic) {
              backgroundMusic.volume = 0.1;
            }
            currentVerseIndex++;
            playNextVerse();
          };
          audioElement.onerror = () => {
            console.log("[v0] Audio error, skipping to next verse");
            currentVerseIndex++;
            playNextVerse();
          };
          audioElement.play().catch((err) => {
            console.log("[v0] Audio play failed:", err);
            currentVerseIndex++;
            playNextVerse();
          });
        } else {
          setTimeout(() => {
            currentVerseIndex++;
            playNextVerse();
          }, 3000);
        }
      } else {
        // All verses done
        console.log("[v0] All verses finished");
        const finalMsgEl = document.getElementById('finalMessage');
        if (finalMsgEl) {
          finalMsgEl.textContent = finalMessage;
          finalMsgEl.classList.add('show');
        }
        
        // Add continue button
        const poemContainer = document.querySelector('.poem-container');
        if (poemContainer && !document.getElementById('continueBtn')) {
          const btn = document.createElement('button');
          btn.id = 'continueBtn';
          btn.className = 'continue-btn';
          btn.textContent = 'Continuer vers la Surprise';
          btn.onclick = () => startCountdown();
          btn.style.animation = 'fadeInUp 0.8s ease-out forwards';
          poemContainer.appendChild(btn);
        }
      }
    }

    // Start countdown with effects
    function startCountdown() {
      const contentEl = document.getElementById('content');
      let countdownValue = 20;

      contentEl.innerHTML = `
        <div class="countdown-section">
          <h2 class="countdown-title">La Surprise arrive...</h2>
          <div class="countdown-number" id="countdownNum">${countdownValue}</div>
          <p class="countdown-label">Secondes</p>
        </div>
      `;

      // Launch initial celebration effects during countdown
      launchCountdownEffects();

      const countdown = setInterval(() => {
        countdownValue--;
        const countdownNum = document.getElementById('countdownNum');
        if (countdownNum) {
          countdownNum.textContent = countdownValue;
        }

        // Add pulsing effect to countdown number
        countdownNum.style.animation = 'countPulse 0.6s ease-in-out';

        if (countdownValue <= 0) {
          clearInterval(countdown);
          startCelebration();
        }
      }, 1000);
    }

    // Countdown effects - flowers, hearts, fireworks
    function launchCountdownEffects() {
      const fireworksContainer = document.getElementById('fireworks');
      
      // Launch fireworks during countdown
      for (let i = 0; i < 50; i++) {
        setTimeout(() => {
          const x = Math.random() * window.innerWidth;
          const y = Math.random() * (window.innerHeight * 0.5);
          explodeFirework(x, y);
        }, i * 100);
      }

      // Create falling hearts and flowers
      for (let i = 0; i < 40; i++) {
        setTimeout(() => {
          createFallingHeart();
          createFallingFlower();
        }, i * 150);
      }
    }

    function createFallingHeart() {
      const heart = document.createElement('div');
      heart.style.position = 'fixed';
      heart.style.left = Math.random() * 100 + '%';
      heart.style.top = '-50px';
      heart.style.fontSize = Math.random() * 30 + 20 + 'px';
      heart.style.color = ['#ff69b4', '#ff1493', '#ffb6c1'][Math.floor(Math.random() * 3)];
      heart.style.pointerEvents = 'none';
      heart.style.zIndex = '15';
      heart.textContent = '‚ù§Ô∏è';
      heart.style.animation = `fall ${Math.random() * 4 + 4}s linear forwards`;
      document.body.appendChild(heart);
      
      setTimeout(() => heart.remove(), 8000);
    }

    function createFallingFlower() {
      const flower = document.createElement('div');
      flower.style.position = 'fixed';
      flower.style.left = Math.random() * 100 + '%';
      flower.style.top = '-50px';
      flower.style.fontSize = Math.random() * 25 + 15 + 'px';
      flower.style.color = ['#ff69b4', '#ffb6c1', '#ff1493'][Math.floor(Math.random() * 3)];
      flower.style.pointerEvents = 'none';
      flower.style.zIndex = '15';
      flower.textContent = 'üåπ';
      flower.style.animation = `fall ${Math.random() * 5 + 4}s linear forwards`;
      document.body.appendChild(flower);
      
      setTimeout(() => flower.remove(), 9000);
    }

    // Start celebration with video and massive effects
    function startCelebration() {
      // Stop background music
      const backgroundMusic = document.getElementById('backgroundMusic');
      if (backgroundMusic) {
        backgroundMusic.pause();
        backgroundMusic.currentTime = 0;
      }

      const contentEl = document.getElementById('content');
      contentEl.innerHTML = `
        <div class="video-section">
          <div class="video-container">
            <video id="celebrationVideo" autoplay onended="launchPostVideoEffects()">
              <source src="${celebrationVideoUrl}" type="video/mp4">
            </video>
          </div>
          <div class="celebration-content">
            <p class="celebration-joy-text">Je t'aime plus que tout au monde! üíï</p>
          </div>
        </div>
      `;

      document.getElementById('backLink').classList.add('show');
    }

    // Launch effects after video ends
    function launchPostVideoEffects() {
      launchMassiveFireworks();
      createMassiveConfetti();
      launchMassiveHearts();
      launchMassiveFlowers();
    }

    // Massive hearts falling
    function launchMassiveHearts() {
      for (let i = 0; i < 100; i++) {
        setTimeout(() => {
          createFallingHeart();
        }, i * 50);
      }
      
      // Continuous hearts
      setInterval(() => {
        for (let j = 0; j < 20; j++) {
          createFallingHeart();
        }
      }, 1500);
    }

    // Massive flowers falling
    function launchMassiveFlowers() {
      for (let i = 0; i < 80; i++) {
        setTimeout(() => {
          createFallingFlower();
        }, i * 60);
      }
      
      // Continuous flowers
      setInterval(() => {
        for (let j = 0; j < 15; j++) {
          createFallingFlower();
        }
      }, 1800);
    }

    // Massive fireworks
    function launchMassiveFireworks() {
      const fireworksContainer = document.getElementById('fireworks');
      for (let i = 0; i < 100; i++) {
        setTimeout(() => {
          const x = Math.random() * window.innerWidth;
          const y = Math.random() * (window.innerHeight * 0.7);
          explodeFirework(x, y);
        }, i * 50);
      }
      
      // Continuous fireworks every 2 seconds
      setInterval(() => {
        for (let j = 0; j < 20; j++) {
          setTimeout(() => {
            const x = Math.random() * window.innerWidth;
            const y = Math.random() * (window.innerHeight * 0.7);
            explodeFirework(x, y);
          }, j * 30);
        }
      }, 2000);
    }

    function explodeFirework(x, y) {
      const fireworksContainer = document.getElementById('fireworks');
      for (let i = 0; i < 60; i++) {
        const angle = (i / 60) * Math.PI * 2;
        const velocity = 8 + Math.random() * 15;
        const tx = Math.cos(angle) * velocity * 60;
        const ty = Math.sin(angle) * velocity * 60;

        const firework = document.createElement('div');
        firework.className = 'firework';
        firework.style.left = x + 'px';
        firework.style.top = y + 'px';
        firework.style.setProperty('--tx', tx + 'px');
        firework.style.setProperty('--ty', ty + 'px');
        firework.style.background = ['#ff69b4', '#ff1493', '#ffb6c1', '#ff69b4', '#ffb6c1'][Math.floor(Math.random() * 5)];
        firework.style.animation = 'fireWorkExplosion 1.5s ease-out forwards';
        fireworksContainer.appendChild(firework);

        setTimeout(() => firework.remove(), 1500);
      }
    }

    // Massive confetti
    function createMassiveConfetti() {
      for (let i = 0; i < 300; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.left = Math.random() * 100 + '%';
        confetti.style.background = ['#ff69b4', '#ff1493', '#ffb6c1', '#ff69b4', '#ffb6c1', '#ffb6c1'][Math.floor(Math.random() * 6)];
        confetti.style.animation = `fall ${Math.random() * 4 + 3}s linear forwards`;
        confetti.style.animationDelay = Math.random() * 0.5 + 's';
        document.body.appendChild(confetti);

        setTimeout(() => confetti.remove(), 8000);
      }
      
      // Continuous confetti
      setInterval(() => {
        for (let j = 0; j < 50; j++) {
          const confetti = document.createElement('div');
          confetti.className = 'confetti';
          confetti.style.left = Math.random() * 100 + '%';
          confetti.style.background = ['#ff69b4', '#ff1493', '#ffb6c1'][Math.floor(Math.random() * 3)];
          confetti.style.animation = `fall ${Math.random() * 3 + 2}s linear forwards`;
          document.body.appendChild(confetti);
          setTimeout(() => confetti.remove(), 5000);
        }
      }, 1500);
    }

    // Initialize on load
    window.addEventListener('pageshow', () => {
      currentVerseIndex = 0;
      showPoemSection();
      createStars();
      createPetals();
      createHearts();
    });

    // Initial load
    currentVerseIndex = 0;
    showPoemSection();
    createStars();
    createPetals();
    createHearts();
  </script>
</body>
</html>
